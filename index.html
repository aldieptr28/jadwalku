<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aplikasi Manajemen Konten</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
    <style>
        body {
            background-color: #f8f9fa;
        }

        .sidebar {
            height: 100%;
            width: 250px;
            position: fixed;
            top: 0;
            left: 0;
            background-color: #343a40;
            padding-top: 20px;
            transition: 0.3s;
            overflow-y: auto;
        }

        .sidebar a {
            padding: 10px 15px;
            text-decoration: none;
            font-size: 18px;
            color: white;
            display: block;
            transition: 0.3s;
        }

        .sidebar a:hover {
            background-color: #575757;
        }

        .sidebar .close-btn {
            position: absolute;
            top: 10px;
            right: 25px;
            font-size: 36px;
            margin-left: 50px;
            cursor: pointer;
        }

        .open-btn {
            font-size: 18px;
            cursor: pointer;
            background-color: #343a40;
            color: white;
            padding: 10px 15px;
            border: none;
        }

        #main-content {
            margin-left: 250px;
            transition: margin-left 0.3s;
            padding: 20px;
        }

        .content-container {
            display: none;
        }

        .content-container.active {
            display: block;
        }

        .btn {
            margin-top: 10px;
        }

        table {
            width: 100%;
        }

        td,
        th {
            text-align: center;
            vertical-align: middle;
        }

        @media (max-width: 768px) {
            #main-content {
                margin-left: 0;
            }

            .sidebar {
                width: 100%;
                height: auto;
                position: relative;
            }

            .sidebar a {
                float: left;
                text-align: center;
                width: 100%;
            }

            .sidebar .close-btn {
                position: relative;
                top: 0;
                right: 0;
            }
        }

        @media (max-width: 576px) {
            .sidebar {
                position: static;
                width: 100%;
                height: auto;
                padding-top: 10px;
            }

            #main-content {
                margin-left: 0;
                padding: 10px;
            }

            h1 {
                font-size: 24px;
            }

            .btn {
                font-size: 14px;
            }

            table,
            th,
            td {
                font-size: 12px;
                padding: 5px;
            }

            .sidebar a {
                padding: 8px 10px;
                font-size: 16px;
            }

            .open-btn {
                padding: 8px 10px;
                font-size: 16px;
            }
        }
    </style>
</head>

<body>
    <div id="mySidebar" class="sidebar">
        <span class="close-btn" onclick="closeNav()">&times;</span>
        <a href="javascript:void(0)" onclick="showContent('schedule')">Jadwal Rutinitas</a>
        <a href="javascript:void(0)" onclick="showContent('tasks')">Tugas Kuliah</a>
        <a href="javascript:void(0)" onclick="showContent('shopping')">Daftar Belanja</a>
        <hr>
        <h5 class="text-light pl-3">Konten Tambahan</h5>
        <div id="additionalContentLinks"></div>
        <button class="btn btn-primary btn-sm" onclick="addNewContent()">Tambah Konten</button>
    </div>

    <div id="main-content">
        <button class="open-btn" onclick="openNav()">&#9776; Menu</button>

        <div id="schedule" class="content-container active">
            <h1 class="text-center mt-4">Jadwal Rutinitas Harian</h1>
            <div class="row mt-5">
                <div class="col-md-10 offset-md-1">
                    <button class="btn btn-primary mb-3" onclick="addNewRow('schedule-table')">Tambah Baris</button>
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>Waktu</th>
                                <th>Kegiatan</th>
                                <th>Rincian</th>
                                <th>Selesai</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="schedule-table">
                            <!-- Isi konten akan diisi di sini -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="tasks" class="content-container">
            <h1 class="text-center mt-4">Tugas Kuliah</h1>
            <div class="row mt-5">
                <div class="col-md-10 offset-md-1">
                    <button class="btn btn-primary mb-3" onclick="addNewRow('tasks-table')">Tambah Baris</button>
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>Tugas</th>
                                <th>Keterangan</th>
                                <th>Selesai</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="tasks-table">
                            <!-- Isi konten akan diisi di sini -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <div id="shopping" class="content-container">
            <h1 class="text-center mt-4">Daftar Belanja</h1>
            <div class="row mt-5">
                <div class="col-md-10 offset-md-1">
                    <button class="btn btn-primary mb-3" onclick="addNewRow('shopping-table')">Tambah Baris</button>
                    <table class="table table-bordered table-striped">
                        <thead class="thead-dark">
                            <tr>
                                <th>Barang</th>
                                <th>Keterangan</th>
                                <th>Selesai</th>
                                <th>Aksi</th>
                            </tr>
                        </thead>
                        <tbody id="shopping-table">
                            <!-- Isi konten akan diisi di sini -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

    </div>

    <!-- jQuery, Popper.js, and Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.0.7/dist/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script>
        function openNav() {
            document.getElementById("mySidebar").style.width = "250px";
            document.getElementById("main-content").style.marginLeft = "250px";
        }

        function closeNav() {
            document.getElementById("mySidebar").style.width = "0";
            document.getElementById("main-content").style.marginLeft = "0";
        }

        function showContent(contentId) {
            const contents = document.querySelectorAll('.content-container');
            contents.forEach(content => content.classList.remove('active'));

            document.getElementById(contentId).classList.add('active');
        }

        function addNewRow(tableId) {
            const tableBody = document.getElementById(tableId);
            const row = document.createElement('tr');

            const columns = tableBody.parentElement.querySelectorAll('thead th').length - 2; // Minus "Selesai" and "Aksi"
            for (let i = 0; i < columns; i++) {
                const cell = document.createElement('td');
                cell.contentEditable = "true";
                row.appendChild(cell);
            }

            const doneCell = document.createElement('td');
            doneCell.classList.add("checkbox-column");
            const checkbox = document.createElement("input");
            checkbox.type = "checkbox";
            checkbox.classList.add("form-check-input");
            doneCell.appendChild(checkbox);
            row.appendChild(doneCell);

            const actionsCell = document.createElement("td");
            const deleteButton = document.createElement("button");
            deleteButton.textContent = "Hapus";
            deleteButton.classList.add("btn", "btn-danger", "btn-sm");
            deleteButton.setAttribute("title", "Hapus Baris");
            deleteButton.onclick = function () {
                row.remove();
                saveContent();
            };

            actionsCell.appendChild(deleteButton);
            row.appendChild(actionsCell);

            tableBody.appendChild(row);
            saveContent();
        }

        function addNewContent() {
            const contentName = prompt("Masukkan nama konten baru:");
            if (contentName) {
                const link = document.createElement("a");
                link.href = "javascript:void(0)";
                link.onclick = function () { showContent(contentName); };
                link.textContent = contentName;
                document.getElementById("additionalContentLinks").appendChild(link);

                const newContent = document.createElement("div");
                newContent.id = contentName;
                newContent.classList.add("content-container");
                newContent.innerHTML = `<h1 class="text-center mt-4">${contentName}</h1><div class="row mt-5"><div class="col-md-10 offset-md-1"><button class="btn btn-primary mb-3" onclick="addNewRow('${contentName}-table')">Tambah Baris</button><table class="table table-bordered table-striped"><thead class="thead-dark"><tr><th>Kolom 1</th><th>Kolom 2</th><th>Kolom 3</th><th>Selesai</th><th>Aksi</th></tr></thead><tbody id="${contentName}-table"></tbody></table></div></div>`;
                document.getElementById("main-content").appendChild(newContent);
                saveContent();
            }
        }

        function saveContent() {
            const mainContent = document.getElementById('main-content').innerHTML;
            localStorage.setItem('mainContent', mainContent);
            const sidebar = document.getElementById('mySidebar').innerHTML;
            localStorage.setItem('sidebar', sidebar);
        }

        window.onload = function () {
            const savedMainContent = localStorage.getItem('mainContent');
            const savedSidebar = localStorage.getItem('sidebar');
            if (savedMainContent && savedSidebar) {
                document.getElementById('main-content').innerHTML = savedMainContent;
                document.getElementById('mySidebar').innerHTML = savedSidebar;

                const openButton = document.createElement('button');
                openButton.classList.add('open-btn');
                openButton.innerHTML = '&#9776; Menu';
                openButton.onclick = openNav;
                document.getElementById('main-content').insertBefore(openButton, document.getElementById('main-content').firstChild);
            }
        };
    </script>
</body>

</html>
